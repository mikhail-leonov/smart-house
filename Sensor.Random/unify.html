<!DOCTYPE html>
<!-- 
/**
 * SmartHub - AI powered Smart Home
 * UI App which is generate random mqtt values based on loaded config file
 * GitHub: https://github.com/mikhail-leonov/smart-house
 * 
 * @author Mikhail Leonov mikecommon@gmail.com
 * @version 0.6.9
 * @license MIT
 */
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unified MQTT Simulator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <script src="/shared/constants.js"></script>
    <script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

    <!-- Local -->
    <link href="/shared/styles.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1 class="mb-4">MQTT All Simulator</h1>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5>Configuration</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="configFile" class="form-label">Upload Configuration JSON</label>
                        <input class="form-control" type="file" id="configFile" accept=".json">
                    </div>
                    <div class="col-md-3">
                        <label for="interval" class="form-label">Send Interval (s)</label>
                        <input type="number" class="form-control" id="interval" min="1" max="60" value="5">
                    </div>
                    <div class="col-md-3">
                        <label for="randomness" class="form-label">Randomness (s)</label>
                        <input type="number" class="form-control" id="randomness" min="0" max="15" value="2">
                    </div>
                </div>
               
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5>Random Simulation Controls</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="randomInterval" checked>
                            <label class="form-check-label" for="randomInterval">Use Random Interval</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="logEachMessage" checked>
                            <label class="form-check-label" for="logEachMessage">Log Each Message</label>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-check">
                            <span id="connectionStatus" class="status-indicator status-offline"></span>
                            <span id="connectionStatusText">Disconnected</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card mb-4">
            <div class="card-header">
                <h5>Message Parameters</h5>
            </div>
            <div class="card-body">
                <div class="row mb-3">
                    <div class="col-md-3">
                        <label for="locationType" class="form-label">Location Type</label>
                        <select class="form-select" id="locationType" disabled>
                            <option value="">Select location</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="floor" class="form-label">Floor</label>
                        <select class="form-select" id="floor" disabled>
                            <option value="">Select floor</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="room" class="form-label">Room</label>
                        <select class="form-select" id="room" disabled>
                            <option value="">Select room</option>
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="variable" class="form-label">Variable</label>
                        <select class="form-select" id="variable" disabled>
                            <option value="">Select variable</option>
                        </select>
                    </div>
                </div>
                
                <div id="valueContainer" class="row mb-3" style="display: none;">
                    <div class="col-md-6">
                        <label for="value" class="form-label">Value</label>
                        <div class="input-group">
                            <input type="text" class="form-control" id="value">
                            <button class="btn btn-outline-secondary" type="button" id="randomValueBtn">Random</button>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div id="variableDescription" class="description-box">
                            Select a variable to see its description and valid values
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
		
        <div class="card mb-4">
            <div class="card-header">
                <h5>Controls</h5>
            </div>
            <div class="card-body">
			
                <div class="row">
                    <div class="col-md-12">
                        <button id="startRandomBtn" class="btn btn-primary me-2">Start Random Simulation</button>
                        <button id="stopRandomBtn" class="btn btn-danger me-2" disabled>Stop Simulation</button>
                        <button id="sendSingleRandomBtn" class="btn btn-secondary">Send One Random Message</button>
                    </div>
                </div>
				
            </div>
        </div>

        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">Simulation Log</h5>
                <button id="clearLogBtn" class="btn btn-sm btn-outline-secondary">Clear Log</button>
            </div>
            <div class="card-body">
                <div id="log"></div>
            </div>
        </div>
    </div>
    <!-- mqtt -->
    <script src="/shared/mqtt-core.js"></script>
    <script src="mqtt-ui.js"></script>

    <script src="/shared/log-core.js"></script>
    <script src="/shared/cache-core.js"></script>
    <script src="/shared/web-core.js"></script>
    <script src="/shared/sensor-core.js"></script>
</body>
</html>